!function(){"use strict";function e(){game.physics.startSystem(Phaser.Physics.ARCADE),D=0,A=0,game.score=A,C=game.add.audio("explosion"),k=game.add.audio("shoot"),game.world.setBounds(0,0,800,640),game.bg=game.add.tileSprite(0,0,7040,640,"bookshelf"),y=game.add.tilemap("background"),y.addTilesetImage("steampunk"),y.addTilesetImage("blocks"),y.setCollisionByExclusion([1]),m=y.createLayer("foreground"),m.resizeWorld(),B=game.add.sprite(12,520,"head"),game.physics.enable(B,Phaser.Physics.ARCADE),B.body.collideWorldBounds=!0,B.body.setSize(25,50,19,0),B.body.gravity.y=450,B.animations.add("left",[2]),B.animations.add("right",[1]),u=game.input.keyboard.createCursorKeys(),P=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.camera.follow(B,Phaser.Camera.FOLLOW_TOPDOWN_TIGHT);var e=[138,419,690,1340,1472,1957,2064,2800,3065,3582,3919,4202,4538,4868,5109,6022,6479,6766],a=0;x=game.add.group(),x.enableBody=!0,x.createMultiple(18,"record"),x.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.gravity.y=750,e.body.bounce=.8}),x.forEach(function(t){t.reset(e[a],400),a++},this),F=game.add.sprite(6798,420,"hat"),game.physics.enable(F,Phaser.Physics.ARCADE),F.body.collideWorldBounds=!0,F.body.gravity.y=950;var t=[553,985,1099,1214,1879,2712,2929,3197,3767,4291,4736,4995,5244,6347,6989],o=0;g=game.add.group(),g.enableBody=!0,g.createMultiple(15,"cup"),g.setAll("body.gravity.y",950),g.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.setSize(44,63),e.body.gravity.y=950,e.animations.add("left",[0,1,2,3],10,!0),e.animations.add("right",[0,3,2,1],10,!0)}),g.forEach(function(e){e.reset(t[o],300),o++},this);var i=[327,740,1640,2190,2500,3390,4098,4410,5450,5800,6160,6566,6844],s=0;h=game.add.group(),h.enableBody=!0,h.createMultiple(13,"coffeecan"),h.setAll("collideWorldBounds",!0),h.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.body.gravity.y=950,e.anchor.set(.5,.5),e.body.setSize(41,48)}),h.forEach(function(e){e.reset(i[s],300),s++},this),p=game.add.group(),p.enableBody=!0,p.createMultiple(2,"bowtie"),p.forEach(function(e){e.body.setSize(64,30,0,13)}),f=game.add.group(),f.enableBody=!0,f.createMultiple(50,"bean"),f.forEach(function(e){e.body.setSize(15,15)}),game.cameraLastX=game.camera.x,game.cameraLastY=game.camera.y,w=game.add.text(20,20,"Local Artists' Vinyl: 0",{fontSize:"32px",fill:"#FFF",align:"center"}),w.fixedToCamera=!0,E=game.add.text(660,20,"Health: 3",{fontSize:"32px",fill:"#FFF"}),E.fixedToCamera=!0}function a(){game.physics.arcade.collide(B,m),game.physics.arcade.collide(F,m),game.physics.arcade.collide(x,m),game.physics.arcade.collide(g,m),game.physics.arcade.collide(h,m),game.physics.arcade.overlap(B,x,l,null,this),game.physics.arcade.overlap(B,F,r,null,this),game.physics.arcade.overlap(p,m,i,null,this),game.physics.arcade.overlap(p,g,d,null,this),game.physics.arcade.overlap(p,h,d,null,this),game.physics.arcade.overlap(p,f,d,null,this),game.physics.arcade.overlap(f,m,i,null,this),game.physics.arcade.overlap(f,g,s,null,this),game.physics.arcade.overlap(B,f,c,null,this),game.physics.arcade.overlap(B,h,c,null,this),game.physics.arcade.overlap(B,g,c,null,this),B.body.velocity.x=0,u.left.isDown?(B.body.velocity.x=-250,B.animations.play("left")):u.right.isDown?(B.body.velocity.x=250,B.animations.play("right")):B.frame=0,u.up.isDown&&B.body.onFloor()&&game.time.now>L&&(B.body.velocity.y=-275,L=game.time.now+750),game.camera.x!==game.cameraLastX&&(game.bg.x-=.4*(game.cameraLastX-game.camera.x),game.cameraLastX=game.camera.x),S=B.body.velocity.x>=0?"right":"left",g.forEachAlive(function(e){e.body.onFloor()&&(e.body.velocity.y=-350,e.animations.play("left")),e.body.x-B.body.x<=300&&o(e)}),h.forEachAlive(function(e){e.body.velocity.x=0,e.body.velocity.x=M[D]}),D=D+1>=M.length?0:D+1,p.forEachAlive(function(e){var a=600;Math.abs(B.x-e.x)>=a&&e.kill()},this),P.isDown&&t(),f.forEachAlive(function(e){e.body.x-game.cameraLastX<=0&&e.kill()}),A%10===1&&(R++,A++,E.text="Health: "+R),0===R&&n()}function t(){game.time.now>T&&"right"===S?(b=p.getFirstExists(!1),b&&(b.reset(B.x-30,B.y-20),b.body.velocity.x=600,T=game.time.now+750,k.play())):game.time.now>T&&"left"===S&&(b=p.getFirstExists(!1),b&&(b.reset(B.x-30,B.y-20),b.body.velocity.x=-600,T=game.time.now+750,k.play()))}function o(e){game.time.now>z&&(v=f.getFirstExists(!1),v&&(v.anchor.setTo(.5,.5),v.reset(e.body.x-30,e.body.y),z=game.time.now+2e3,game.physics.arcade.moveToObject(v,B,140)))}function i(e){e.kill()}function s(e,a){C.play(),e.kill(),a.kill()}function l(e,a){a.kill(),A+=1,w.text="Local Artists' Vinyl: "+A}function r(e){e.destroy(),game.world.setBounds(0,0,0,0),game.score=A,game.hitCount=R,game.state.start("menu2")}function c(e,a){a.kill(),e.animations.play("damage"),C.play(),a.body.x=-2e5,e.body.x-=75,--R,E.text="Health: "+R}function d(e,a){C.play(),e.kill(),a.kill()}function n(){game.state.start("menu"),R=2}game.state.add("lvl1",{create:e,update:a});var y,m,g,h,u,p,b,f,v,x,E,A,w,P,k,C,B,F,D,L=0,S="right",T=0,z=0,R=2,M=[150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150]}();