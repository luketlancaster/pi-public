!function(){"use strict";function e(){game.physics.startSystem(Phaser.Physics.ARCADE),D=0,w=game.score,R=game.hitCount,B=game.add.audio("explosion"),C=game.add.audio("shoot"),game.world.setBounds(0,0,800,640),game.bg=game.add.tileSprite(0,0,7040,640,"treeBG"),y=game.add.tilemap("background2"),y.addTilesetImage("steampunk"),y.addTilesetImage("blocks"),y.addTilesetImage("trees2"),m=y.createLayer("background"),g=y.createLayer("platforms"),m.resizeWorld(),g.resizeWorld(),y.setCollisionByExclusion([1]),F=game.add.sprite(40,0,"head"),game.physics.enable(F,Phaser.Physics.ARCADE),F.body.collideWorldBounds=!1,F.body.setSize(36,56,14,-8),F.body.gravity.y=400,F.animations.add("left",[2]),F.animations.add("right",[1]),p=game.input.keyboard.createCursorKeys(),k=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.camera.follow(F,Phaser.Camera.FOLLOW_TOPDOWN_TIGHT);var e=[173,674,815,1300,1521,1907,2294,2398,2499,2682,2846,2992,3148,3279,3404,3495,3724,4160,4574,4841,5103,5230,5650,5935,6144,6419,6705],a=0;A=game.add.group(),A.enableBody=!0,A.createMultiple(27,"record"),A.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.gravity.y=750,e.body.bounce=.8}),A.forEach(function(t){t.reset(e[a],200),a++},this),L=game.add.sprite(6982,70,"banner"),game.physics.enable(L,Phaser.Physics.ARCADE),L.body.collideWorldBounds=!0,L.animations.add("marquee",[0,1,2],10,!0),L.scale.set(2,2);var t=[475,1079,1733,2113,3015,3711,4129,4839,5252,5678,6688],i=0;h=game.add.group(),h.enableBody=!0,h.createMultiple(10,"cup"),h.setAll("collideWorldBounds",!0),h.setAll("body.gravity.y",950),h.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.setSize(52,63),e.body.gravity.y=950,e.animations.add("left",[0,1,2,3],10,!0),e.animations.add("right",[0,3,2,1],10,!0)}),h.forEach(function(e){e.reset(t[i],90),i++},this);var o=[597,3437,4e3,4531,6287,6743],i=0;u=game.add.group(),u.enableBody=!0,u.createMultiple(7,"coffeecan"),u.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.body.gravity.y=950,e.anchor.set(.5,.5),e.body.setSize(41,48)}),u.forEach(function(e){e.reset(o[i],300),i++},this),b=game.add.group(),b.enableBody=!0,b.createMultiple(2,"bowtie"),b.forEach(function(e){e.body.setSize(64,30,0,13)}),v=game.add.group(),v.enableBody=!0,v.createMultiple(2,"bean"),v.setAll("body.setSize",32,32),game.cameraLastX=game.camera.x,game.cameraLastY=game.camera.y,P=game.add.text(20,20,"Local Artists' Vinyl: "+game.score,{fontSize:"32px",fill:"#FFF",align:"center"}),P.fixedToCamera=!0,E=game.add.text(660,20,"Health: "+game.hitCount,{fontSize:"32px",fill:"#FFF"}),E.fixedToCamera=!0}function a(){game.physics.arcade.collide(F,g),game.physics.arcade.collide(L,g),game.physics.arcade.collide(A,g),game.physics.arcade.collide(h,g),game.physics.arcade.collide(u,g),game.physics.arcade.overlap(F,A,l,null,this),game.physics.arcade.overlap(F,L,r,null,this),game.physics.arcade.overlap(b,g,o,null,this),game.physics.arcade.overlap(b,h,d,null,this),game.physics.arcade.overlap(b,u,d,null,this),game.physics.arcade.overlap(b,v,d,null,this),game.physics.arcade.overlap(v,g,o,null,this),game.physics.arcade.overlap(v,h,s,null,this),game.physics.arcade.overlap(F,v,c,null,this),game.physics.arcade.overlap(F,u,c,null,this),game.physics.arcade.overlap(F,h,c,null,this),F.body.velocity.x=0,L.animations.play("marquee"),p.left.isDown?(F.body.velocity.x=-250,F.animations.play("left")):p.right.isDown?(F.body.velocity.x=250,F.animations.play("right")):F.frame=0,p.up.isDown&&F.body.onFloor()&&game.time.now>S&&(F.body.velocity.y=-275,S=game.time.now+750),game.camera.x!==game.cameraLastX&&(game.bg.x-=.2*(game.cameraLastX-game.camera.x),game.cameraLastX=game.camera.x),F.body.y>=700&&(F.body.y=0),T=F.body.velocity.x>=0?"right":"left",h.forEachAlive(function(e){e.body.onFloor()&&(e.body.velocity.y=-350,e.animations.play("left")),e.body.y>=655&&e.kill(),e.body.x-F.body.x<=200&&i(e)}),u.forEachAlive(function(e){e.body.velocity.x=0,e.body.velocity.x=W[D]}),D=D+1>=W.length?0:D+1,b.forEachAlive(function(e){var a=600;Math.abs(F.x-e.x)>=a&&e.kill()},this),k.isDown&&t(),v.forEachAlive(function(e){e.body.x-game.cameraLastX<=0&&e.kill()}),w%10===1&&(R++,w++,E.text="Health: "+R),0===R&&n()}function t(){game.time.now>z&&"right"===T?(f=b.getFirstExists(!1),f&&(f.reset(F.x-30,F.y-20),f.body.velocity.x=600,z=game.time.now+750,C.play())):game.time.now>z&&"left"===T&&(f=b.getFirstExists(!1),f&&(f.reset(F.x-30,F.y-20),f.body.velocity.x=-600,z=game.time.now+750,C.play()))}function i(e){game.time.now>M&&(x=v.getFirstExists(!1),x&&(x.anchor.setTo(.5,.5),x.reset(e.body.x-30,e.body.y),M=game.time.now+2e3,game.physics.arcade.moveToObject(x,F,140)))}function o(e){e.kill()}function s(e,a){B.play(),e.kill(),a.kill()}function l(e,a){a.kill(),w+=1,P.text="Local Artists' Vinyl: "+w}function r(e){e.destroy(),game.world.setBounds(0,0,0,0),game.state.start("bossMenu"),game.hitCount=R,game.score=w}function c(e,a){e.animations.play("damage"),B.play(),a.body.x=-2e5,e.body.x-=75,--R,E.text="Health: "+R}function d(e,a){B.play(),e.kill(),a.kill()}function n(){game.state.start("menu"),R=2}game.state.add("lvl2",{create:e,update:a});var y,m,g,h,u,p,b,f,v,x,A,E,w,P,k,C,B,F,L,D,S=0,T="right",z=0,M=0,R=0,W=[150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150]}();